<?xml version="1.0" encoding="utf-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">

	<!-- Servlet Definitions and Mappings -->
	<servlet>
		<servlet-name>CleanQuestionSearchIndex</servlet-name>
		<servlet-class>com.preludio.web.admin.CleanQuestionSearchIndexServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>Reindex</servlet-name>
		<servlet-class>com.preludio.web.admin.ReindexServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DownloadProfiles</servlet-name>
		<servlet-class>com.preludio.web.admin.DownloadProfilesServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DownloadQuestions</servlet-name>
		<servlet-class>com.preludio.web.admin.DownloadQuestionsServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DownloadAnswers</servlet-name>
		<servlet-class>com.preludio.web.admin.DownloadAnswersServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>BulkUploadAuthinfo</servlet-name>
		<servlet-class>com.preludio.web.admin.BulkUploadAuthinfoServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>BulkUploadProfile</servlet-name>
		<servlet-class>com.preludio.web.admin.BulkUploadProfileServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>BulkUploadQuestion</servlet-name>
		<servlet-class>com.preludio.web.admin.BulkUploadQuestionServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>BulkUploadAnswer</servlet-name>
		<servlet-class>com.preludio.web.admin.BulkUploadAnswerServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>EventsReportServlet</servlet-name>
		<servlet-class>com.preludio.web.admin.EventsReportServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>Question</servlet-name>
		<servlet-class>com.preludio.web.QuestionServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>QuestionSearchTypeahead</servlet-name>
		<servlet-class>com.preludio.web.QuestionSearchTypeaheadServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>Profile</servlet-name>
		<servlet-class>com.preludio.web.ProfileServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>Login</servlet-name>
		<servlet-class>com.preludio.web.LoginServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>Feed</servlet-name>
		<servlet-class>com.preludio.web.FeedServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>Answer</servlet-name>
		<servlet-class>com.preludio.web.AnswerServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>Vote</servlet-name>
		<servlet-class>com.preludio.web.VoteServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>UserImageServer</servlet-name>
		<servlet-class>com.preludio.web.ImageServerServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>SubscriberServiceServlet</servlet-name>
		<servlet-class>com.preludio.services.infra.pubsub.web.SubscriberServiceServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>Reindex</servlet-name>
		<url-pattern>/admin/reindex</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>CleanQuestionSearchIndex</servlet-name>
		<url-pattern>/admin/cleanQuestionIndex</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DownloadProfiles</servlet-name>
		<url-pattern>/admin/downloadProfiles</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DownloadQuestions</servlet-name>
		<url-pattern>/admin/downloadQuestions</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DownloadAnswers</servlet-name>
		<url-pattern>/admin/downloadAnswers</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>BulkUploadAuthinfo</servlet-name>
		<url-pattern>/admin/bulkUploadAuthinfo</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>BulkUploadProfile</servlet-name>
		<url-pattern>/admin/bulkUploadProfile</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>BulkUploadQuestion</servlet-name>
		<url-pattern>/admin/bulkUploadQuestion</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>BulkUploadAnswer</servlet-name>
		<url-pattern>/admin/bulkUploadAnswer</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>EventsReportServlet</servlet-name>
		<url-pattern>/admin/events/report</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>Question</servlet-name>
		<url-pattern>/question</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>Question</servlet-name>
		<url-pattern>/question/*</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>QuestionSearchTypeahead</servlet-name>
		<url-pattern>/qsearch/typeahead</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>Profile</servlet-name>
		<url-pattern>/profile</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>Profile</servlet-name>
		<url-pattern>/profile/*</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>Login</servlet-name>
		<url-pattern>/auth</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>Login</servlet-name>
		<url-pattern>/logout</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>Feed</servlet-name>
		<url-pattern>/feed</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>Answer</servlet-name>
		<url-pattern>/answer</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>Vote</servlet-name>
		<url-pattern>/vote</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>UserImageServer</servlet-name>
		<url-pattern>/usr_img/*</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>SubscriberServiceServlet</servlet-name>
		<url-pattern>/q/*</url-pattern>
	</servlet-mapping>

	<!-- JSP Definitions and Mappings -->
	<servlet>
		<servlet-name>home</servlet-name>
		<jsp-file>/index.jsp</jsp-file>
	</servlet>
	<servlet-mapping>
		<servlet-name>home</servlet-name>
		<url-pattern>/home</url-pattern>
	</servlet-mapping>

	<servlet>
		<servlet-name>question.search</servlet-name>
		<jsp-file>/jsp/question.search.jsp</jsp-file>
	</servlet>
	<servlet-mapping>
		<servlet-name>question.search</servlet-name>
		<url-pattern>/question/search/view</url-pattern>
	</servlet-mapping>

	<servlet>
		<servlet-name>question.view</servlet-name>
		<jsp-file>/jsp/question.view.jsp</jsp-file>
	</servlet>
	<servlet-mapping>
		<servlet-name>question.view</servlet-name>
		<url-pattern>/question/view</url-pattern>
	</servlet-mapping>

	<servlet>
		<servlet-name>question.ask</servlet-name>
		<jsp-file>/jsp/question.ask.jsp</jsp-file>
	</servlet>
	<servlet-mapping>
		<servlet-name>question.ask</servlet-name>
		<url-pattern>/question/ask</url-pattern>
	</servlet-mapping>

	<servlet>
		<servlet-name>login</servlet-name>
		<jsp-file>/jsp/login.jsp</jsp-file>
	</servlet>
	<servlet-mapping>
		<servlet-name>login</servlet-name>
		<url-pattern>/login</url-pattern>
	</servlet-mapping>

	<servlet>
		<servlet-name>profile.signup</servlet-name>
		<jsp-file>/jsp/profile.signup.jsp</jsp-file>
	</servlet>
	<servlet-mapping>
		<servlet-name>profile.signup</servlet-name>
		<url-pattern>/signup</url-pattern>
	</servlet-mapping>

	<servlet>
		<servlet-name>profile.view</servlet-name>
		<jsp-file>/jsp/profile.view.jsp</jsp-file>
	</servlet>
	<servlet-mapping>
		<servlet-name>profile.view</servlet-name>
		<url-pattern>/profile/view</url-pattern>
	</servlet-mapping>

	<servlet>
		<servlet-name>profile.edit</servlet-name>
		<jsp-file>/jsp/profile.edit.jsp</jsp-file>
	</servlet>
	<servlet-mapping>
		<servlet-name>profile.edit</servlet-name>
		<url-pattern>/profile/edit</url-pattern>
	</servlet-mapping>

	<servlet>
		<servlet-name>feed.view</servlet-name>
		<jsp-file>/jsp/feed.view.jsp</jsp-file>
	</servlet>
	<servlet-mapping>
		<servlet-name>feed.view</servlet-name>
		<url-pattern>/feed/view</url-pattern>
	</servlet-mapping>

	<servlet>
		<servlet-name>authinfo.bulk.upload</servlet-name>
		<jsp-file>/jsp/admin/authinfo.bulk.upload.jsp</jsp-file>
	</servlet>
	<servlet-mapping>
		<servlet-name>authinfo.bulk.upload</servlet-name>
		<url-pattern>/admin/authinfo/upload</url-pattern>
	</servlet-mapping>

	<servlet>
		<servlet-name>profile.bulk.upload</servlet-name>
		<jsp-file>/jsp/admin/profile.bulk.upload.jsp</jsp-file>
	</servlet>
	<servlet-mapping>
		<servlet-name>profile.bulk.upload</servlet-name>
		<url-pattern>/admin/profile/upload</url-pattern>
	</servlet-mapping>

	<servlet>
		<servlet-name>question.bulk.upload</servlet-name>
		<jsp-file>/jsp/admin/question.bulk.upload.jsp</jsp-file>
	</servlet>
	<servlet-mapping>
		<servlet-name>question.bulk.upload</servlet-name>
		<url-pattern>/admin/question/upload</url-pattern>
	</servlet-mapping>

	<servlet>
		<servlet-name>answer.bulk.upload</servlet-name>
		<jsp-file>/jsp/admin/answer.bulk.upload.jsp</jsp-file>
	</servlet>
	<servlet-mapping>
		<servlet-name>answer.bulk.upload</servlet-name>
		<url-pattern>/admin/answer/upload</url-pattern>
	</servlet-mapping>

	<servlet>
		<servlet-name>events.report.view</servlet-name>
		<jsp-file>/jsp/admin/events.report.view.jsp</jsp-file>
	</servlet>
	<servlet-mapping>
		<servlet-name>events.report.view</servlet-name>
		<url-pattern>/admin/events/report/view</url-pattern>
	</servlet-mapping>

	<!-- Servlet Filter Definitions and Mappings -->
	<filter>
        <filter-name>authFilterCompleteBlock</filter-name>
        <filter-class>com.preludio.web.AuthFilter</filter-class>
		<init-param>
            <param-name>COMPLETE_BLOCK</param-name>
            <param-value>1</param-value>
        </init-param>
    </filter>

	<filter>
        <filter-name>authFilterPartialBlock</filter-name>
        <filter-class>com.preludio.web.AuthFilter</filter-class>
		<init-param>
            <param-name>COMPLETE_BLOCK</param-name>
            <param-value>0</param-value>
        </init-param>
    </filter>

	<filter-mapping>
        <filter-name>authFilterCompleteBlock</filter-name>
		<url-pattern>/reindex</url-pattern>
    </filter-mapping>
<!--
	<filter-mapping>
        <filter-name>authFilterCompleteBlock</filter-name>
		<url-pattern>/profile</url-pattern>
    </filter-mapping>
-->
	<filter-mapping>
        <filter-name>authFilterCompleteBlock</filter-name>
		<url-pattern>/logout</url-pattern>
    </filter-mapping>
	<filter-mapping>
        <filter-name>authFilterCompleteBlock</filter-name>
		<url-pattern>/feed</url-pattern>
    </filter-mapping>
	<filter-mapping>
        <filter-name>authFilterCompleteBlock</filter-name>
		<url-pattern>/answer</url-pattern>
    </filter-mapping>
	<filter-mapping>
        <filter-name>authFilterCompleteBlock</filter-name>
		<url-pattern>/vote</url-pattern>
    </filter-mapping>
	<filter-mapping>
        <filter-name>authFilterCompleteBlock</filter-name>
		<url-pattern>/question/ask</url-pattern>
    </filter-mapping>
	<filter-mapping>
        <filter-name>authFilterCompleteBlock</filter-name>
		<url-pattern>/profile/edit</url-pattern>
    </filter-mapping>
	<filter-mapping>
        <filter-name>authFilterCompleteBlock</filter-name>
		<url-pattern>/feed/view</url-pattern>
    </filter-mapping>
	<filter-mapping>
        <filter-name>authFilterCompleteBlock</filter-name>
		<url-pattern>/admin/*</url-pattern>
    </filter-mapping>

	<filter-mapping>
        <filter-name>authFilterPartialBlock</filter-name>
		<url-pattern>/question</url-pattern>
    </filter-mapping>
	<filter-mapping>
        <filter-name>authFilterPartialBlock</filter-name>
		<url-pattern>/question/*</url-pattern>
    </filter-mapping>
<!--
	<filter-mapping>
        <filter-name>authFilterPartialBlock</filter-name>
		<url-pattern>/profile/*</url-pattern>
    </filter-mapping>
-->

	<!-- Misc -->
	<welcome-file-list>
		<welcome-file>index.jsp</welcome-file>
	</welcome-file-list>
</web-app>
